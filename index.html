<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berchuma Furniture Sales Tracking</title>
    <style>
        /* Updated styling for a more colorful and user-friendly design */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
        }
        
        h1 {
            text-align: center;
            color: #3b5998;
            margin-top: 20px;
        }

        .container {
            width: 90%;
            margin: 20px auto;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        thead tr {
            background-color: #3b5998;
            color: #fff;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tbody tr:hover {
            background-color: #e0e7ff;
        }

        .button {
            background-color: #3b5998;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
            border-radius: 4px;
        }

        .button:hover {
            background-color: #2e4a7d;
        }

        .large-input, .small-input, .extra-large-input {
            width: 90%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .checkbox {
            width: auto;
        }

        .delete-btn {
            background-color: #e74c3c;
            color: #fff;
            border: none;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 4px;
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        /* Sidebar styling */
        .sidebar {
            width: 250px;
            height: 100vh;
            background-color: #3b5998;
            color: #fff;
            position: fixed;
            top: 0;
            left: 0;
            overflow: auto;
            padding-top: 20px;
        }

        .sidebar a {
            padding: 15px;
            text-decoration: none;
            color: #fff;
            display: block;
        }

        .sidebar a:hover {
            background-color: #2e4a7d;
        }

        /* Main content styling */
        .main-content {
            margin-left: 250px;
            padding: 20px;
        }

        /* Scroll styling */
        .container {
            overflow-x: auto;
        }

        table {
            min-width: 1200px;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <a href="javascript:goToCurrentMonth()">Current Month</a>
    <a href="javascript:previousMonth()">Previous Month</a>
    <a href="javascript:nextMonth()">Next Month</a>
    <a href="javascript:saveCurrentMonthData()">Save Data</a>
</div>

<div class="main-content">
    <h1>Berchuma Furniture Sales Tracking for <span id="currentMonth">January</span></h1>

    <div class="container">
        <table id="paymentTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Phone Number</th>
                    <th>Prepaid Amount</th>
                    <th>Item Value</th>
                    <th>Payment Date</th>
                    <th>Furniture Type</th>
                    <th>Manufacturing Days</th>
                    <th>Confirmed Payment</th>
                    <th>Delete Row</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <!-- Button section -->
    <div style="text-align: center; margin-top: 10px;">
        <button class="button" onclick="addRow()">Add Row</button>
    </div>
</div>

<script>
    // Your existing JavaScript functions
    let currentMonthIndex = 0;
    const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    const monthlyData = {};

    function loadData() {
        const savedData = JSON.parse(localStorage.getItem('paymentData')) || {};
        Object.assign(monthlyData, savedData);
        updateTable();
    }

    function updateTable() {
        const table = document.getElementById('paymentTable').querySelector('tbody');
        table.innerHTML = '';
        const currentMonth = months[currentMonthIndex];

        if (!monthlyData[currentMonth]) {
            monthlyData[currentMonth] = [];
        }

        monthlyData[currentMonth].forEach((rowData, index) => addRow(rowData, index));
        document.getElementById('currentMonth').textContent = currentMonth;
    }

    function addRow(data = {name: '', phone: '', prepaid: '', value: '', date: '', furniture: '', days: '', confirmed: false}, index = null) {
        const table = document.getElementById('paymentTable').querySelector('tbody');
        const row = document.createElement('tr');

        row.innerHTML = `
            <td><textarea class="large-input name">${data.name}</textarea></td>
            <td><textarea class="large-input phone">${data.phone}</textarea></td>
            <td><input type="number" class="small-input prepaid" value="${data.prepaid}" /></td>
            <td><input type="number" class="small-input value" value="${data.value}" /></td>
            <td><input type="date" class="small-input date" value="${data.date}" /></td>
            <td><textarea class="extra-large-input furniture" rows="4" maxlength="100">${data.furniture}</textarea></td>
            <td><input type="number" class="small-input days" value="${data.days}" /></td>
            <td><input type="checkbox" class="checkbox confirmed" ${data.confirmed ? 'checked' : ''} /></td>
            <td><button class="delete-btn" onclick="deleteRow(${index})">Delete</button></td>
        `;

        table.appendChild(row);
    }

    function saveCurrentMonthData() {
        const table = document.getElementById('paymentTable').querySelector('tbody');
        const rows = table.querySelectorAll('tr');
        const data = [];

        rows.forEach(row => {
            const name = row.querySelector('.name').value;
            const phone = row.querySelector('.phone').value;
            const prepaid = row.querySelector('.prepaid').value;
            const value = row.querySelector('.value').value;
            const date = row.querySelector('.date').value;
            const furniture = row.querySelector('.furniture').value;
            const days = row.querySelector('.days').value;
            const confirmed = row.querySelector('.confirmed').checked;
            data.push({ name, phone, prepaid, value, date, furniture, days, confirmed });
        });

        fetch('save_data.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.text())
        .then(result => {
            alert(result);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    function deleteRow(index) {
        monthlyData[months[currentMonthIndex]].splice(index, 1);
        updateTable();
    }

    function previousMonth() {
        currentMonthIndex = (currentMonthIndex - 1 + months.length) % months.length;
        updateTable();
    }

    function nextMonth() {
        currentMonthIndex = (currentMonthIndex + 1) % months.length;
        updateTable();
    }

    function goToCurrentMonth() {
        const now = new Date();
        currentMonthIndex = now.getMonth();
        updateTable();
    }

    window.onload = loadData;
</script>

</body>
</html>


